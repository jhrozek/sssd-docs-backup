<html><head><link rel="stylesheet" href="/sssd-test2/trac.css" type="text/css" /><link rel="stylesheet" href="/sssd-test2/wiki.css" type="text/css" /></head><body><h2 id="Description">Description</h2>
<p>
This test ensures that users stored in native LDB backend can log in using SSSD.
</p>
<h2 id="Howtotest">How to test</h2>
<ol><li>Follow the steps in <a class="wiki" href="https://docs.pagure.org/sssd-test2/Fedora_11_Test_Day/Installation.html">Installing the SSSD</a>. If you are running the Test Day LiveCD, you may skip this step. Especially ensure that you have the right contents of <tt>/etc/pam.d/system-auth</tt>.
</li><li>As root, create the file /etc/pam.d/sssdproxylocal. <strong>DUE TO OVERSIGHT, THIS FILE IS NOT ON THE LIVECD</strong>
<pre class="wiki">#%PAM-1.0
auth        required      pam_env.so
auth        sufficient    pam_fprintd.so
auth        sufficient    pam_unix.so nullok
auth        requisite     pam_succeed_if.so uid &gt;= 500 quiet
auth        required      pam_deny.so

account     sufficient    pam_unix.so
account     sufficient    pam_localuser.so
account     sufficient    pam_succeed_if.so uid &lt; 500 quiet
account     required      pam_permit.so

password    requisite     pam_cracklib.so try_first_pass retry=3
password    sufficient    pam_unix.so sha512 shadow nullok use_authtok
password    required      pam_deny.so

session     optional      pam_keyinit.so revoke
session     required      pam_limits.so
session     [success=1 default=ignore] pam_succeed_if.so service in crond quiet use_uid
session     sufficient    pam_unix.so
</pre></li><li>Choose one user from <tt>/etc/passwd</tt>. It may be convenient to create one just for testing and assign him a known password
<pre class="wiki">useradd validlocaluser -u 4999
passwd validlocaluser
</pre>If 4999 is taken, use something else in the 500-4999 range.
</li><li>Make sure the SSH deamon is running. If not, start it
<pre class="wiki">service sshd status
service sshd start
</pre></li><li>Try logging in as validlocaluser
<pre class="wiki">ssh localhost -l validlocaluser@LEGACYLOCAL
</pre></li><li>While logged in as validlocaluser, try changing your password
<pre class="wiki">passwd
</pre></li><li>Log out and log back in using your new password
<pre class="wiki">logout
ssh localhost -l validlocaluser@LEGACYLOCAL
</pre></li></ol></body></html>