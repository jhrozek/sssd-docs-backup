<html><head><link rel="stylesheet" href="/sssd-test2/trac.css" type="text/css" /><link rel="stylesheet" href="/sssd-test2/wiki.css" type="text/css" /></head><body><p>
</p><div class="wiki-toc">
<ol>
  <li>
    <ol>
      <li>
        <a href="#Description">Description</a>
      </li>
      <li>
        <a href="#HowtoTest">How to Test</a>
      </li>
    </ol>
  </li>
</ol>
</div><p>
</p>
<h2 id="Description">Description</h2>
<p>
This test will verify whether the SSSD is appropriately serving native local users through NSS.
</p>
<h2 id="HowtoTest">How to Test</h2>
<ol><li>Follow the steps in <a class="wiki" href="https://docs.pagure.org/sssd-test2/Fedora_11_Test_Day/Installation.html">Installing the SSSD</a>. If you are running the Test Day LiveCD, you may skip this step.
</li><li>Copy <a class="attachment" href="https://fedorahosted.org/sssd/attachment/wiki/Fedora_11_Test_Day/sssd.conf" title="Attachment 'sssd.conf' in Fedora_11_Test_Day">sssd.conf</a><a class="trac-rawlink" href="https://fedorahosted.org/sssd/raw-attachment/wiki/Fedora_11_Test_Day/sssd.conf" title="Download">â€‹</a> to /etc/sssd/sssd.conf
</li><li>Restart the SSSD service (as root):
<pre class="wiki">service sssd restart
</pre>(Please disregard the "<tt>Unable to register control with rootdse!</tt>" messages, as they are erroneous.
</li><li>Verify that the SSSD services are running:
<pre class="wiki">ps -e |grep sss
</pre>You should see:
<pre class="wiki">30968 pts/0    00:00:00 sssd
30970 pts/0    00:00:00 sssd_dp
30972 pts/0    00:00:00 sssd_be
30973 pts/0    00:00:00 sssd_be
30974 pts/0    00:00:00 sssd_be
30975 pts/0    00:00:00 sssd_nss
30976 pts/0    00:00:00 sssd_pam
</pre></li><li>Enable the use of the SSSD in nsswitch.conf. Change the following lines of /etc/nsswitch.conf from:
<pre class="wiki">passwd:     files
shadow:     files
group:      files
</pre>to
<pre class="wiki">passwd:     files sss
shadow:     files
group:      files sss
</pre></li><li>Create a new local user with the following command (as root)
<pre class="wiki">/usr/sbin/sss_useradd nativelocaluser
</pre>(Again, you can disregard the "<tt>Unable to register control with rootdse!</tt>" messages.)
</li><li> Verify that this user is enumerated by NSS:
<pre class="wiki">getent passwd |grep nativelocaluser
</pre>You should see:
<pre class="wiki">nativelocaluser:x:5000:5000:nativelocaluser:/home/nativelocaluser:/bin/bash
</pre></li><li>Verify that this user's information can be seen by directly requesting it
<pre class="wiki">getent passwd nativelocaluser@LOCAL
</pre>The output should be the same as previous.
</li><li>Verify that this user's information can be seen by searching all domains
<pre class="wiki">getent passwd nativelocaluser
</pre>The output should be the same as previous.
</li><li>Verify that a group with the same name exists
<pre class="wiki">getent group |grep nativelocaluser
</pre>The output should be:
<pre class="wiki">nativelocaluser:x:5000:
</pre></li><li>Verify that this group can be requested directly
<pre class="wiki">getent group nativelocaluser@LOCAL
</pre>The output should be the same as the previous.
</li><li>Verify that this group can be seen by searching all domains
<pre class="wiki">getent group nativelocaluser
</pre>The output should be the same as the previous.
</li><li>Create a new group (as root)
<pre class="wiki">/usr/sbin/sss_groupadd nativelocalgroup
</pre></li><li>Add the nativelocaluser to the group
<pre class="wiki">/usr/sbin/sss_usermod -a nativelocalgroup nativelocaluser
</pre></li><li>Verify the contents of this group using getent as above:
<pre class="wiki">nativelocalgroup:x:5001:nativelocaluser
</pre></li></ol></body></html>