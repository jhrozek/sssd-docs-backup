<html><head><link rel="stylesheet" href="/sssd-test2/trac.css" type="text/css" /><link rel="stylesheet" href="/sssd-test2/wiki.css" type="text/css" /></head><body><h1 id="DEPRECATEDmovedtosssctl">DEPRECATED (moved to sssctl)</h1>
<p>
This tool is no longer developed and it's functionality was moved to sssctl tool.
</p>
<h1 id="sss_confchecktool">sss_confcheck tool</h1>
<p>
Related ticket(s):
</p>
<ul><li><a class="ext-link" href="https://fedorahosted.org/sssd/ticket/2269"><span class="icon">​</span>https://fedorahosted.org/sssd/ticket/2269</a>
</li></ul><h3 id="Problemstatement">Problem statement</h3>
<p>
There is no easy way to debug the SSSD configuration without having to look into the debug logs. Moreover the debug logs can be difficult to understand for people outside SSSD development team. Some common issues can be identified during static offline analysis of the config files. To find these issues soon we need a tool that performs this analysis and provides human readable report.
</p>
<h3 id="Usecases">Use cases</h3>
<ul><li>performing ad-hoc static analysis of the installed SSSD configuration
</li><li>performing ad-hoc static analysis of SSSD configuration files retrieved from user with some SSSD problems
</li></ul><h3 id="Overviewofthesolution-sss_confchecktool">Overview of the solution - sss_confcheck tool</h3>
<p>
A new tool will be added to sss_* tools that will perform static analysis of SSSD configuration files.
This tool can be run without any parameters in which case it will print a report to the standard
output in the following or similar format:
</p>
<pre class="wiki">$ sss_confcheck
Number of identified issues: 1
[rule/allowed_nss_options]: Attribute 'foo' is not allowed in section 'nss'. Check for typos.

Used configuration file:
&lt;Here will be the contents of sssd.conf file&gt;

Number of used configuration override snippets: 2
List of configuration override snippets in order of priority (lowest priority first):
snippet_name_1.conf
snippet_name_2.conf

Content of configuration override snippets:
snippet_name_1.conf:
&lt;content of snippet_name_1.conf&gt;

snippet_name_2.conf:
&lt;content of snippet_name_2.conf&gt;

Merged configuration:
&lt;content of merged configuration (sssd.conf merged with snippets)&gt;
</pre><p>
Available options:
</p>
<pre class="wiki">  ?, --help
  --config-file PATH_CONFIG_FILE                Path to config file that will be checked.
  --snippets-dir PATH_TO_SNIPPETS_DIRECTORY     Path to snippets directory.
  --no-validators                               Do not use validators (no analysis will be made).
  --no-file-content                             Do not print config file or snippet contents.
  --no-snippets                                 Ignore the snippets.
  --silent                                      If no errors are detected, do not print anything.
</pre><h3 id="Implementationdetails">Implementation details</h3>
<p>
The tool will use ding-libs validators feature described in this design document <a class="ext-link" href="https://docs.pagure.org/sssd-test2/DesignDocs/libini-config-file-checks.html"><span class="icon">​</span>https://fedorahosted.org/sssd/wiki/DesignDocs/libini-config-file-checks</a>.
</p>
<h3 id="Configurationchanges">Configuration changes</h3>
<p>
No configuration changes.
</p>
<h3 id="HowToTest">How To Test</h3>
<p>
Depending on the capabilities of validators used by SSSD, make an error in configuration and run sss_confcheck to see if it was detected.
</p>
<h3 id="Plannedfeaturesinversion1-initialversion">Planned features in version 1 - initial version</h3>
<p>
Validators capabilities:<br />
</p>
<ul><li>able to detect typo in option name
</li><li>able to detect typo in section name
</li><li>able to detect option in wrong section
</li></ul><p>
Limitations:
</p>
<ul><li>printing the resulting configuration (after merging with snippets) may not be in the initial version.
</li></ul><h3 id="Authors">Authors</h3>
<p>
Michal Židek <a class="mail-link" href="mailto:mzidek@redhat.com"><span class="icon">​</span>mzidek@redhat.com</a>
</p>
</body></html>