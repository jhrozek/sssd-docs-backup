<html><head><link rel="stylesheet" href="/sssd-test2/trac.css" type="text/css" /><link rel="stylesheet" href="/sssd-test2/wiki.css" type="text/css" /></head><body><p>
</p><div class="wiki-toc">
<ol>
  <li>
    <a href="#Contribute">Contribute</a>
    <ol>
      <li>
        <a href="#ContributionPolicy">Contribution Policy</a>
      </li>
      <li>
        <a href="#SourceCodeRepository">Source Code Repository</a>
      </li>
      <li>
        <a href="#Tasksfornewcomers">Tasks for newcomers</a>
        <ol>
          <li>
            <a href="#Gettingthesource">Getting the source</a>
          </li>
        </ol>
      </li>
      <li>
        <a href="#BuildingSSSD">Building SSSD</a>
        <ol>
          <li>
            <a href="#UsefulTipsandinformationfordevelopers">Useful Tips and information for developers</a>
          </li>
          <li>
            <a href="#COPRRepository">COPR Repository</a>
          </li>
        </ol>
      </li>
      <li>
        <a href="#Sendingpatchtoupstream">Sending patch to upstream</a>
        <ol>
          <li>
            <a href="#CodingStyle">Coding Style</a>
          </li>
          <li>
            <a href="#Submitting">Submitting</a>
          </li>
          <li>
            <a href="#Patchmetadata">Patch metadata</a>
          </li>
          <li>
            <a href="#Unittests">Unit tests</a>
            <ol>
              <li>
                <a href="#Runningintegrationtestslocally">Running integration tests (locally)</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="#LocalizationandInternationalization">Localization and Internationalization</a>
          </li>
        </ol>
      </li>
    </ol>
  </li>
  <li>
    <a href="#LatestDocumentationandPresentations">Latest Documentation and Presentations</a>
  </li>
</ol>
</div><p>
</p>
<h1 id="Contribute">Contribute</h1>
<p>
There are many ways you can contribute to the System Security Services Daemon. This page should provide some basic pointers.
</p>
<p>
SSSD development discussions occur either on the <a class="ext-link" href="https://fedorahosted.org/mailman/listinfo/sssd-devel"><span class="icon">​</span>SSSD development list</a> or on the <a class="ext-link" href="irc://irc.freenode.net/sssd"><span class="icon">​</span>#sssd IRC channel</a> on <a class="ext-link" href="http://freenode.net/"><span class="icon">​</span>freenode</a>. Keep in mind that SSSD developers are spread across different time zones, which makes mailing list preferred communication channel if you wish to reach the entire team.
</p>
<p>
The SSSD originated as a sister-project to <a class="ext-link" href="http://www.freeipa.org"><span class="icon">​</span>FreeIPA</a>, so we share many pieces. Contributing to FreeIPA may also help SSSD and vice versa.
</p>
<p>
If you want to file a bug or enhancement request, please log in with your Fedora Account System credentials. If you do not have a Fedora Account, you can register for one at <a class="ext-link" href="https://admin.fedoraproject.org/accounts/"><span class="icon">​</span>https://admin.fedoraproject.org/accounts/</a>. There is dedicated page about <a class="ext-link" href="https://docs.pagure.org/sssd-test2/Reporting_sssd_bugs.html"><span class="icon">​</span>bug reporting</a>.
</p>
<h2 id="ContributionPolicy">Contribution Policy</h2>
<p>
All source code committed to the SSSD is assumed to be made available under the GPLv3+ license unless the submitter specifies another license at that time. The upstream SSSD maintainers reserve the right to refuse a submission if the license is deemed incompatible with the goals of the project.
</p>
<h2 id="SourceCodeRepository">Source Code Repository</h2>
<p>
For the SSSD project, we use the <a class="ext-link" href="http://www.kernel.org/pub/software/scm/git/docs/gittutorial.html"><span class="icon">​</span>Git</a> source control system.
</p>
<pre class="wiki">https://pagure.io/SSSD/sssd.git
</pre><h2 id="Tasksfornewcomers">Tasks for newcomers</h2>
<p>
We try to mark tickets that don't require too much existing knowledge with
the <tt>easyfix</tt> keyword in Trac. We also prepared
<a class="ext-link" href="https://fedorahosted.org/sssd/report/34"><span class="icon">​</span>a Trac query</a> that lists
the easy fixes. Before starting the work on any of these tickets, it might
be a good idea to contact the SSSD developers on the
<a class="ext-link" href="https://lists.fedorahosted.org/archives/list/sssd-devel@lists.fedorahosted.org/"><span class="icon">​</span>sssd-devel list</a> and check if the ticket is still valid or ask for guidance
in general.
</p>
<h3 id="Gettingthesource">Getting the source</h3>
<p>
To check out the latest SSSD sources, install git on your system (Instructions are for Fedora, you may need to use a platform-specific installation mechanism for other OSes).
</p>
<pre class="wiki">sudo dnf -y install git
</pre><p>
You can find an excellent <a class="ext-link" href="http://www.kernel.org/pub/software/scm/git/docs/gittutorial.html"><span class="icon">​</span>tutorial</a> for using git.
</p>
<p>
The first time, you will want to configure git with your name and email address for patch attribution:
</p>
<pre class="wiki">git config --global user.name "GIVENNAME SURNAME"
git config --global user.email "username@domain.com"
</pre><p>
You can enable syntax highlighting at the console (for git commands such as '<tt>git status</tt>' and '<tt>git diff</tt>') by setting:
</p>
<pre class="wiki">git config --global color.ui auto
</pre><p>
And if you would like to have a graphical tool for resolving merge conflicts, you can install and set up meld:
</p>
<pre class="wiki">sudo dnf -y install meld
</pre><pre class="wiki">git config --global merge.tool meld
</pre><p>
It can be invoked with
</p>
<pre class="wiki">git mergetool
</pre><p>
You can also enable the commit template by:
</p>
<pre class="wiki">git config commit.template .git-commit-template
</pre><p>
Once that's done, you can clone our upstream git repository with
</p>
<pre class="wiki">git clone https://pagure.io/SSSD/sssd.git
</pre><p>
This will create a new subdirectory 'sssd' in the current directory which will contain the current master sources. All development should be done first against the master branch, then backported to one of the stable branches if necessary.
</p>
<h2 id="BuildingSSSD">Building SSSD</h2>
<p>
Starting with SSSD 1.10 beta, we now include a set of helper aliases and environment variables in SSSD to simplify building development versions of SSSD on Fedora. To take advantage of them, use the following command:
</p>
<pre class="wiki">. /path/to/sssd-source/contrib/fedora/bashrc_sssd
</pre><p>
To build SSSD from source, follow these steps:
</p>
<ol><li>Install necessary tools
<pre class="wiki"># when using yum
sudo yum -y install rpm-build yum-utils libldb-devel

# when using dnf
sudo dnf -y install rpm-build dnf-plugins-core libldb-devel
</pre></li></ol><ol start="2"><li>Create source rpm (run from git root directory)
<pre class="wiki">contrib/fedora/make_srpm.sh
</pre></li></ol><ol start="3"><li>Install SSSD dependencies
<pre class="wiki"># when using yum
sudo yum-builddep rpmbuild/SRPMS/sssd-*.src.rpm

# when using dnf
sudo dnf builddep rpmbuild/SRPMS/sssd-*.src.rpm
</pre></li></ol><p>
If you plan on working with the SSSD source often, you may want to add the following to your <tt>~/.bashrc</tt> file:
</p>
<pre class="wiki">if [ -f /path/to/sssd-source/contrib/fedora/bashrc_sssd ]; then
    . /path/to/sssd-source/contrib/fedora/bashrc_sssd
fi
</pre><p>
You can now produce a Debug build of SSSD by running:
</p>
<pre class="wiki">cd /path/to/sssd-source
reconfig &amp;&amp; chmake
</pre><p>
The <tt>reconfig</tt> alias will run <tt>autoreconf -if</tt>, create a parallel build directory named after your CPU architecture (e.g. x86_64) and then run the configure script with the appropriate options for installing on a Fedora system with all experimental features enabled.
</p>
<p>
The <tt>chmake</tt> alias will then perform the build (with build messages suppressed except on warning or error) as well as build and run tests.
</p>
<p>
Finally, assuming you have sudo privilege, you can run the <tt>sssinstall</tt> alias to install this debug build onto the build machine.
</p>
<pre class="wiki">sssinstall &amp;&amp; echo build install successful
</pre><p>
You can also directly build <strong>rpm packages</strong> for Fedora or CentOS using make target <em>rpms</em> or <em>
prerelease-rpms</em>. The second version will create rpm packages with date and git hash in package release. 
</p>
<pre class="wiki">make rpms
#snip
Wrote: /dev/shm/gcc/rpmbuild/RPMS/x86_64/sssd-libwbclient-1.13.90-0.fc23.x86_64.rpm
Wrote: /dev/shm/gcc/rpmbuild/RPMS/x86_64/sssd-libwbclient-devel-1.13.90-0.fc23.x86_64.rpm
Wrote: /dev/shm/gcc/rpmbuild/RPMS/x86_64/sssd-debuginfo-1.13.90-0.fc23.x86_64.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.jeWpr7
+ umask 022
+ cd /dev/shm/gcc/rpmbuild/BUILD
+ cd sssd-1.13.90
+ rm -rf /dev/shm/gcc/rpmbuild/BUILDROOT/sssd-1.13.90-0.fc23.x86_64
+ exit 0
</pre><p>
To install SSSD on other distributions, you can run the usual Autotools combo:
</p>
<pre class="wiki">autoreconf -i -f &amp;&amp; \
./configure --enable-nsslibdir=/lib64 --enable-pammoddir=/lib64/security &amp;&amp; \
make
sudo make install
</pre><p>
To build and install the code. Please note that by default, the Autotools install prefix is <tt>/usr/local</tt>. Also, if you are building and installing on a 32bit machine, you should use <tt>/lib/</tt> instead of <tt>/lib64</tt> for <tt>nsslibdir</tt> and <tt>pammoddir</tt>. Please note that even if you are installing to <tt>/usr/local</tt>, the NSS and PAM libraries must be installed to system library directories as that's where NSS and PAM would be looking for them.
</p>
<h3 id="UsefulTipsandinformationfordevelopers">Useful Tips and information for developers</h3>
<p>
There is a <a class="wiki" href="https://docs.pagure.org/sssd-test2/DevelTips.html">dedicated page</a> that contains a collection of tips that are useful for developers. The <a class="ext-link" href="https://docs.pagure.org/sssd-test2/InternalsDocs.html"><span class="icon">​</span>SSSD Internals page</a> is useful to become more familiar with SSSD terminology, components, and flow between processes.
</p>
<h3 id="COPRRepository">COPR Repository</h3>
<p>
You can download development packages from <a class="ext-link" href="https://copr.fedoraproject.org/coprs/"><span class="icon">​</span>COPR</a> repo:
</p>
<ul><li><a class="ext-link" href="https://copr.fedorainfracloud.org/groups/g/sssd/coprs/"><span class="icon">​</span>https://copr.fedorainfracloud.org/groups/g/sssd/coprs/</a>
</li></ul><h2 id="Sendingpatchtoupstream">Sending patch to upstream</h2>
<h3 id="CodingStyle">Coding Style</h3>
<p>
We have adopted the code style and formatting specification used by the FreeIPA project to describe our <a class="ext-link" href="http://www.freeipa.org/page/Python_Coding_Style"><span class="icon">​</span>Python</a> coding style.
For C language we also used <a class="ext-link" href="http://www.freeipa.org/page/Coding_Style"><span class="icon">​</span>FreeIPA C style</a> but this style is currently outdated and a <a href="http://fedorahosted.org/sssd/wiki/CodingStyle">new updated C style guide</a> was written for SSSD.
</p>
<h3 id="Submitting">Submitting</h3>
<p>
Make your changes and then add any new or modified files to a change-set with the command:
</p>
<pre class="wiki">git add &lt;path_to_file1&gt; &lt;path_to_file2&gt; ...
git commit
</pre><p>
Before submitting a patch, always make sure it <a class="ext-link" href="https://docs.pagure.org/sssd-test2/Contribute.html#Runningintegrationtestslocally"><span class="icon">​</span>doesn't break SSSD tests</a> and applies to the latest upstream master branch. You will want to rebase to this branch and fix any merge conflicts (in case someone else changed the same code).
</p>
<pre class="wiki">git remote update
git rebase -i origin/master
</pre><p>
If this rebase has a merge conflict, you will need to resolve the conflict before you continue. If you get stuck or make a mistake, you can use
</p>
<pre class="wiki">git rebase --abort
</pre><p>
This will put you right back where you started.
</p>
<p>
Patches should be split so that every logical change in the large patchset is contained in its own patch. An example of this is <a class="ext-link" href="https://fedorahosted.org/sssd/ticket/2789"><span class="icon">​</span>SSSD Ticket #2789</a> where one patch makes the resolv_is_address() function public with tests
and the other adds the function in the SSSD providers.
</p>
<p>
Once your changes are ready for submission, submit it via a <a class="ext-link" href="https://docs.pagure.org/sssd-test2/GithubWorkflow.html"><span class="icon">​</span>github pull request</a>.
</p>
<p>
If a patch isn't accepted on the first review, you will need to modify it and resubmit it. When this happens, you will want to amend your changes to the existing patch with
</p>
<pre class="wiki">git add &lt;files&gt;
git commit --amend
</pre><p>
If you need to make changes to earlier patches in your tree, you can use
</p>
<pre class="wiki">git rebase -i origin/master
</pre><p>
and follow the directions in the interactive rebase to modify specific patches.
</p>
<p>
Then just re-push the patches to github, the pull request will be refreshed automatically.
</p>
<h3 id="Patchmetadata">Patch metadata</h3>
<p>
The description associated with the patch is an important piece of information that allows other developers or users to see what the change was about, what bug did the commit fix or what feature did the commit implement. To structure the information many SSSD developers use the following format:
</p>
<ul><li>one-line short description
</li><li>blank line
</li><li>ticket or bugzilla URL (if available)
</li><li>blank line
</li><li>One or more paragraphs that describe the change if it can't be described fully in the one-line description
</li></ul><p>
These best practices are loosely based on the <a class="ext-link" href="http://www.kernel.org/doc/Documentation/SubmittingPatches"><span class="icon">​</span>kernel patch submission recommendation</a>.
</p>
<p>
An example of a patch formatted according to the above guidelines is commit <a class="changeset" href="https://fedorahosted.org/sssd/changeset/cbee11e912bb391ba254b0bac8c1159c1f634533/" title="sssctl: Flags for command initialization

Allow passing flags for command ...">cbee11e912bb391ba254b0bac8c1159c1f634533</a>:
</p>
<pre class="wiki">sssctl: Flags for command initialization

Allow passing flags for command specific initialization. Currently
only one flag is available to skip the confdb initialization which is
required to improve config-check command.

Resolves:
https://fedorahosted.org/sssd/ticket/3209
</pre><h3 id="Unittests">Unit tests</h3>
<p>
It is preferred if a patch comes together with a unit test. SSSD uses the <a class="ext-link" href="http://cmocka.org/"><span class="icon">​</span>cmocka</a> library for developing unit tests, although some older tests still use the <a class="ext-link" href="http://check.sourceforge.net/"><span class="icon">​</span>check framework</a>. For an introduction to cmocka, see either the examples in the <tt>src/tests/cmocka</tt> directory or read the <a class="ext-link" href="https://lwn.net/Articles/558106/"><span class="icon">​</span>lwn article on cmocka</a>.
</p>
<h4 id="Runningintegrationtestslocally">Running integration tests (locally)</h4>
<p>
The easiest way to run the integration tests is by running:
</p>
<pre class="wiki">make intgcheck
</pre><p>
Running the complete suite of tests may be overkill for debugging. Running individual tests from the suite can be done according to the following examples:
</p>
<pre class="wiki">INTGCHECK_PYTEST_ARGS="-k test_netgroup.py" make intgcheck-run
INTGCHECK_PYTEST_ARGS="test_netgroup.py -k test_add_empty_netgroup" make intgcheck-run
</pre><p>
The INTGCHECK_PYTEST_ARGS format can be checked in the <a class="ext-link" href="http://doc.pytest.org/en/latest/contents.html"><span class="icon">​</span>PyTest official documentation</a>.
</p>
<h3 id="LocalizationandInternationalization">Localization and Internationalization</h3>
<p>
Our development policy for the SSSD requires that any code that generates a user-facing message should be wrapped by GNU <tt>gettext</tt> macros so that they can eventually be translated. We use <a class="ext-link" href="http://zanata.org/"><span class="icon">​</span>zanata</a> for translating.
</p>
<h1 id="LatestDocumentationandPresentations">Latest Documentation and Presentations</h1>
<p>
There is a dedicated page where we keep our documentation.
</p>
<ul><li><a class="wiki" href="https://docs.pagure.org/sssd-test2/Documentation.html">Documentation</a>
</li></ul></body></html>