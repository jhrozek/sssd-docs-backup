<html><head><link rel="stylesheet" href="/sssd-test2/trac.css" type="text/css" /><link rel="stylesheet" href="/sssd-test2/wiki.css" type="text/css" /></head><body><p>
</p><div class="wiki-toc">
<ol>
  <li>
    <ol>
      <li>
        <a href="#ReleaseProcessforSSSD">Release Process for SSSD</a>
        <ol>
          <li>
            <a href="#Pre-requisites">Pre-requisites</a>
          </li>
          <li>
            <a href="#Preparethesources">Prepare the sources</a>
            <ol>
              <li>
                <a href="#SpecialBetaorPre-releaserules">Special Beta or Pre-release rules</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="#Tagandsigntherelease">Tag and sign the release</a>
            <ol>
              <li>
                <a href="#SpecialBetaorPre-releaserules1">Special Beta or Pre-release rules</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="#GenerateHTMLmanpages">Generate HTML manpages</a>
          </li>
          <li>
            <a href="#Createareleasetarball">Create a release tarball</a>
            <ol>
              <li>
                <a href="#SpecialBetaorPre-releaserules2">Special Beta or Pre-release rules</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="#Preparethebranchforthenextversion">Prepare the branch for the next version</a>
            <ol>
              <li>
                <a href="#Special-case:branchingoffmastertotrackthenextmajorversion">Special-case: branching off master to track the next major version</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="#UploadthetarballtoFedorahosted.org">Upload the tarball to Fedorahosted.org</a>
          </li>
          <li>
            <a href="#UpdatetheSSSDReleasePage">Update the SSSD Release Page</a>
            <ol>
              <li>
                <a href="#Special-case:finalreleaseaftermultiplepreviewreleases">Special-case: final release after multiple preview releases</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="#UpdatetheTracmilestonesandversions">Update the Trac milestones and versions</a>
          </li>
          <li>
            <a href="#SchedulereviewoftheSSSDswikipagesforthenextrelease">Schedule review of the SSSD's wiki pages for the next release</a>
          </li>
          <li>
            <a href="#UpdatetheSSSDFrontPage">Update the SSSD Front Page</a>
          </li>
          <li>
            <a href="#Announcethereleasetotheworld">Announce the release to the world!</a>
          </li>
        </ol>
      </li>
    </ol>
  </li>
</ol>
</div><p>
</p>
<h2 id="ReleaseProcessforSSSD">Release Process for SSSD</h2>
<blockquote>
<p>
We will use SSSD 1.3.0 as an example. Substitute with the appropriate version where needed.
</p>
</blockquote>
<h3 id="Pre-requisites">Pre-requisites</h3>
<ul><li>Commit access to the SSSD upstream repository
</li><li>A GPG key signed by at least two other members of the SSSD team.
</li><li>Access to the fedorahosted.org fileserver
</li><li>WIKI_ADMIN privilege for the SSSD Trac instance
</li><li>Maintainer privileges on the SSSD Zanata Instance. Follow the <a class="ext-link" href="http://zanata.org/help/cli/cli-configuration/"><span class="icon">​</span>zanata guide</a> to set up the zanata-cli tool
</li><li>A fresh clone of the SSSD upstream repository to work from
</li><li>Ensure that all tickets that were closed in this release are marked with the appropriate resolution.
</li><li>Perform a scratch build on all supported architectures.
</li></ul><h3 id="Preparethesources">Prepare the sources</h3>
<ol><li>Ensure that you have the latest version of the upstream sources.
</li><li>Update the translation files.
<ol><li>In the root of SSSD checkout, pull new translations from zanata with
<pre class="wiki">zanata-cli pull -s . -t .
</pre></li><li>If new translations have been added to the main translations (<tt>po/*.po</tt>), add the new language to <tt>po/LINGUAS</tt>. Please keep them in English alphabetical order.
</li><li>If new translations have been added to the manpage translations (<tt>src/man/po/*.po</tt>), add the new language to <tt>src/man/po/po4a.cfg</tt>. Please keep them in English alphabetical order.
</li><li>Run <tt>autoreconf -if &amp;&amp; ./configure &amp;&amp; make update-po &amp;&amp; make distcheck</tt> from the root
</li><li>Check <tt>git status</tt> for changes to <tt>*.po</tt> or <tt>*.pot</tt> files.
</li></ol></li><li>Commit the new <tt>.po[t]</tt> files.
</li><li>Push the changes.
</li></ol><h4 id="SpecialBetaorPre-releaserules">Special Beta or Pre-release rules</h4>
<ol><li>For the benefit of translators, push any new strings up to Zanata whenever we make a pre-release tarball
<pre class="wiki">zanata-cli push -s .
</pre></li><li>If this is is the last pre-release (e.g. final beta before bugfix-only phase) String Freeze should be announced on the sssd-devel list and the Zanata site.
</li></ol><h3 id="Tagandsigntherelease">Tag and sign the release</h3>
<ol><li>Tag the release and sign it with your GPG key
<pre class="wiki">git tag -s sssd-1_3_0
</pre></li><li>Push the tag. Pus the tag explictly instead of using --tags so that you do not push extraneous tags by mistake.
<pre class="wiki">git push origin sssd-1_3_0
</pre></li></ol><h4 id="SpecialBetaorPre-releaserules1">Special Beta or Pre-release rules</h4>
<p>
When tagging a beta or release candidate, the sources should be tagged twice. Once for the pure numeric value and once for the human-friendly value. So for example, if we are tagging SSSD 1.9.0 beta 2, we should do:
</p>
<pre class="wiki">git tag -s sssd-1_8_92
git tag -s sssd-1_9_0_beta2
</pre><p>
Followed by
</p>
<pre class="wiki">git push --tags
</pre><h3 id="GenerateHTMLmanpages">Generate HTML manpages</h3>
<ul><li>Use the attached perl script to produce XHTML-formatted manpages.
<pre class="wiki">perl make-xhtml.pl /path/to/xml /path/to/output
</pre></li><li>Upload these manpages to public space (for example, FedoraPeople space)
</li><li>Link to these files when creating the release page entry.
</li></ul><h3 id="Createareleasetarball">Create a release tarball</h3>
<ol><li>Run <tt>scripts/release.sh</tt> from the root directory of the source checkout
<ul><li>This will create two files, <tt>sssd-1.3.0.tar.gz</tt> and <tt>sssd-1.3.0.tar.gz.asc</tt>
</li></ul></li><li>Create an md5sum and a sha1sum of the tarball
<pre class="wiki">md5sum sssd-1.3.0.tar.gz &gt; sssd-1.3.0.tar.gz.md5sum
sha1sum sssd-1.3.0.tar.gz &gt; sssd-1.3.0.tar.gz.sha1sum
</pre></li></ol><h4 id="SpecialBetaorPre-releaserules2">Special Beta or Pre-release rules</h4>
<p>
When creating a tarball for a beta or a release candidate, the resulting tarball should be renamed appropriately. To use the 1.9.0 beta 2 example:
</p>
<pre class="wiki">mv sssd-1.8.92.tar.gz sssd-1.9.0beta2.tar.gz
mv sssd-1.8.92.tar.gz.asc sssd-1.9.0beta2.tar.gz.asc
</pre><h3 id="Preparethebranchforthenextversion">Prepare the branch for the next version</h3>
<ol><li>Update the version in version.m4 to the next point release (e.g. 1.3.1)
<ul><li>Only update the version to a final release (like 1.9.0) right before releasing the final version. Bumping the version to final sooner would prevent us from being able to release another pre-release..
</li></ul></li><li>Push this new version
<pre class="wiki">git push
</pre></li></ol><h4 id="Special-case:branchingoffmastertotrackthenextmajorversion">Special-case: branching off master to track the next major version</h4>
<ol><li>As an example, we will branch off <tt>sssd-1-3</tt> and let master track the development of sssd 1.4
</li><li>Create a stable branch from master
<pre class="wiki">    git checkout -b sssd-1-3
    git push -n origin sssd-1-3
    # verify everything looks sane
    git push origin sssd-1-3
</pre></li><li>Switch back to the master branch
</li><li>On master, update the version in version.m4 to the next point release (e.g. <tt>1.3.90</tt>)
</li><li>Push this new version
<pre class="wiki">    git push -n origin master
    # verify everything looks sane
    git push origin master
</pre></li></ol><h3 id="UploadthetarballtoFedorahosted.org">Upload the tarball to Fedorahosted.org</h3>
<ol><li><tt>scp sssd-1.3.0.tar.gz fedorahosted.org:sssd</tt>
</li><li><tt>scp sssd-1.3.0.tar.gz.asc fedorahosted.org:sssd</tt>
</li></ol><h3 id="UpdatetheSSSDReleasePage">Update the <a class="wiki" href="https://docs.pagure.org/sssd-test2/Releases.html">SSSD Release Page</a></h3>
<ol><li>Add a line at the top of the <a class="wiki" href="https://docs.pagure.org/sssd-test2/Releases.html">Releases</a> page with links to <tt>https://fedorahosted.org/released/sssd/sssd-1.3.0.tar.gz</tt> and <tt>https://fedorahosted.org/released/sssd/sssd-1.3.0.tar.gz.asc</tt>
</li><li>Add the md5sum and sha1sum calculated above
</li><li>Create a release notes page (e.g. <a class="wiki" href="https://docs.pagure.org/sssd-test2/Releases/Notes-1.3.0.html">Releases/Notes-1.3.0</a>). This page should be marked read-only (so only WIKI_ADMINS can modify it). To generate the detailed changelog:
<pre class="wiki">git shortlog previoustag..newtag
</pre></li><li>For each release, if any changes have occurred in packaging (a new directory, a new provider plugin, etc.), the release notes page should include a section notifying potential packagers of these changes. In general, this can be determined by doing (from the root of the git checkout):
<pre class="wiki"> git diff previoustag..newtag -- contrib/sssd.spec.in
</pre></li><li>For each release, if any changes have occured in documentation, such as new options, options changing default values, the release notes should include a section that summarizes there changes.
<pre class="wiki"> git diff previoustag..newtag -- src/man
</pre></li><li>Update <a class="wiki" href="https://docs.pagure.org/sssd-test2/Documentation.html">Documentation</a> with links to the latest manual pages and/or Deployment Guides
</li><li>Update <a class="wiki" href="https://docs.pagure.org/sssd-test2/SecuritySensitiveOptions.html">SecuritySensitiveOptions</a> if any new security-sensitive options were added
</li></ol><h4 id="Special-case:finalreleaseaftermultiplepreviewreleases">Special-case: final release after multiple preview releases</h4>
<p>
When releasing a final version (such as 1.9.0) after multiple preview releases, the release notes page for that final release should contain all of the changes from the various preview release note pages. This way, potential packagers and users do not need to examine all of the prerelease notes.
</p>
<h3 id="UpdatetheTracmilestonesandversions">Update the Trac milestones and versions</h3>
<p>
Actions to take in the Trac Admin pages:
</p>
<ol><li>Mark the milestone as complete
</li><li>Create a new milestone for the next minor version (even if one isn't planned)
</li><li>Create a new version
</li><li>If this new version is the highest available (i.e. not a maintenance release on an older branch or a beta release) change the default version to it
</li><li>Make sure all tickets that affect user experience are documented using the Release Notes field in Trac
</li></ol><h3 id="SchedulereviewoftheSSSDswikipagesforthenextrelease">Schedule review of the SSSD's wiki pages for the next release</h3>
<ol><li>Add new ticket with the title 'Review and update SSSD's wiki pages for X.Y.Z release'. Example ticket: <a class="ext-link" href="https://fedorahosted.org/sssd/ticket/2779"><span class="icon">​</span>https://fedorahosted.org/sssd/ticket/2779</a>)
</li></ol><h3 id="UpdatetheSSSDFrontPage">Update the <a class="wiki" href="https://docs.pagure.org/sssd-test2/WikiStart.html">SSSD Front Page</a></h3>
<ol><li>Replace the latest release listed on the front page with the line you just created on the <a class="wiki" href="https://docs.pagure.org/sssd-test2/Releases.html">Releases</a> page.
</li></ol><h3 id="Announcethereleasetotheworld">Announce the release to the world!</h3>
<ol><li>Send an email to <tt>sssd-devel@lists.fedorahosted.org</tt>, <tt>sssd-users@lists.fedorahosted.org</tt>, <tt>freeipa-users@lists.fedorahosted.org</tt> and <tt>freeipa-interest@redhat.com</tt> announcing the availability of the new version.
</li><li>Announce the release on social networks
</li></ol></body></html>