<html><head><link rel="stylesheet" href="/sssd-test2/trac.css" type="text/css" /><link rel="stylesheet" href="/sssd-test2/wiki.css" type="text/css" /></head><body><p>
</p><div class="wiki-toc">
<ol>
  <li>
    <ol>
      <li>
        <a href="#CodeReviews">Code Reviews</a>
        <ol>
          <li>
            <a href="#Configuringadevelopmenttree">Configuring a development tree</a>
          </li>
          <li>
            <a href="#Creatingacode-review:TheAutomatedWay">Creating a code-review: The Automated Way</a>
            <ol>
              <li>
                <a href="#Troubleshooting">Troubleshooting</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="#Creatingacode-review:TheManualWay">Creating a code-review: The Manual Way</a>
          </li>
        </ol>
      </li>
      <li>
        <a href="#PerformingReviews">Performing Reviews</a>
        <ol>
          <li>
            <a href="#FirstSteps">First Steps</a>
          </li>
          <li>
            <a href="#Performingareview">Performing a review</a>
          </li>
        </ol>
      </li>
    </ol>
  </li>
</ol>
</div><p>
</p>
<h2 id="CodeReviews">Code Reviews</h2>
<p>
Code reviews in the SSSD are managed through the Fedora Hosted <a class="ext-link" href="https://fedorahosted.org/reviewboard"><span class="icon">​</span>ReviewBoard</a> instance. To submit a code review, you will need a Fedora Account System user account. This is the same account that you use for the SSSD wiki and ticket tracker. If you do not yet have an account, please sign up for one at <a class="ext-link" href="https://fedorahosted.org/accounts"><span class="icon">​</span>FAS</a>.
</p>
<h3 id="Configuringadevelopmenttree">Configuring a development tree</h3>
<ol><li>Check out the source repository, if you haven't already done so.
<pre class="wiki">git clone git://git.fedorahosted.org/git/sssd.git
</pre></li><li>In the SSSD source checkout, run the following command to set the location of the ReviewBoard server:
<pre class="wiki">git config reviewboard.url https://fedorahosted.org/reviewboard/
</pre></li></ol><h3 id="Creatingacode-review:TheAutomatedWay">Creating a code-review: The Automated Way</h3>
<ol><li>Create a new git branch, based off of the head of the upstream master (or branch). For purposes of illustration, I will assume this branch will be named 'review', and that the upstream repository is 'origin'
<pre class="wiki">git checkout -b review origin/master
</pre></li><li>On this new branch, use <tt>git cherry-pick</tt> or <tt>git am</tt> to apply the series of one or more patches you want to submit for review. Fix any merge conflicts.
</li><li>Verify with <tt>git log</tt> that you have the correct set of patches applied.
</li><li>From the root of the SSSD source checkout (or the root $builddir if you are building in a parallel tree), run this command:
<pre class="wiki">make review
</pre></li><li>You may be prompted for your username and password. This is your Fedora Account System name and password, the same as you would use for filing bugs in Trac.
</li><li>Generating the review may take some time (for large patches or many patches, this may even be minutes).
</li><li>The tool will output several HTTP links, one per review that has been created. You should go to the ReviewBoard server and verify that the patches were submitted properly, and then publish the review for all to see.
<ol><li>Log into the ReviewBoard web interface at <a class="ext-link" href="https://fedorahosted.org/sssd/"><span class="icon">​</span>https://fedorahosted.org/sssd/</a>
</li><li>Click on <tt>All My Requests</tt>
</li><li>Review each patch marked "Draft" in that list. Make sure to check <tt>View Diff</tt>.
</li><li>The <tt>Summary</tt>, <tt>Description</tt> and <tt>Reviewers</tt> should be automatically set.
</li><li>If you would prefer to have a particular reviewer, add them to the list.
</li><li>If the change is related to one or more tickets in Trac, enter the number(s) into the <tt>Bugs</tt> field. ReviewBoard will automatically convert that to a link.
</li><li>If the change is intended for a branch instead of master, specify it in the <tt>Branch</tt> field.
</li><li>Publish the review (or discard it if something went wrong)
</li></ol></li></ol><h4 id="Troubleshooting">Troubleshooting</h4>
<ul><li>If you see:
<pre class="wiki">The repository path "sgallagh@fedorapeople.org:public_git/sssd.git" is not in the
list of known repositories on the server.
</pre></li></ul><p>
This means you did not properly create the branch to generate the review requests from. This branch must be based off of the upstream master (or branch). Chances are, the branch you're trying to commit is based off of a private git repo branch like Fedora People.
</p>
<ul><li>If you see:
<pre class="wiki">'The repository path "git://git.fedorahosted.org/sssd.git" is not in the list of known repositories on the server.'
</pre></li></ul><p>
This means you have your remote repo configured to use the alias for the SSSD repo instead of the proper full path. You will want to do edit your .git/config file and edit the URL for this repo to be <tt>git://git.fedorahosted.org/git/sssd.git</tt>
</p>
<h3 id="Creatingacode-review:TheManualWay">Creating a code-review: The Manual Way</h3>
<p>
<em>Note: These instructions apply only to single-patch changes. For multiple patch sets, it is VASTLY easier to follow <tt>The Automated Way</tt>. The post-review tool included in the contrib/ directory handles the necessary magic to produce parent diffs in ReviewBoard</em>
</p>
<ol><li>Generate the patch to be submitted using the following command:
<pre class="wiki">git format-patch --full-index -1
</pre></li><li>Log into the ReviewBoard web interface at <a class="ext-link" href="https://fedorahosted.org/reviewboard/"><span class="icon">​</span>https://fedorahosted.org/reviewboard/</a>
</li><li>Click on <tt>New Review Request</tt> in the navigation bar.
</li><li>In the <tt>Repository</tt> drop-down menu, select <tt>sssd</tt>
</li><li><tt>Browse...</tt> to your patch
</li><li>Click <tt>Create Review Request</tt>
</li><li>Enter the <tt>Summary</tt> and <tt>Description</tt> fields and click "OK"
</li><li>If you would prefer to have a particular reviewer, add them to the list.
</li><li>If the change is related to one or more tickets in Trac, enter the number(s) into the <tt>Bugs</tt> field. ReviewBoard will automatically convert that to a link.
</li><li>If the change is intended for a branch instead of master, specify it in the <tt>Branch</tt> field.
</li><li>Publish the review (or discard it if something went wrong)
</li></ol><h2 id="PerformingReviews">Performing Reviews</h2>
<h3 id="FirstSteps">First Steps</h3>
<ol><li>Add yourself to the SSSD Review Group.
<ol><li>Click on <tt>My account</tt> in the upper-right corner.
</li><li>Check the box labeled <tt>SSSD Review Group</tt>
</li><li>Click <tt>Save Preferences</tt>
</li></ol></li></ol><h3 id="Performingareview">Performing a review</h3>
<ol><li>Log into the ReviewBoard instance at <a class="ext-link" href="https://fedorahosted.org/reviewboard/"><span class="icon">​</span>https://fedorahosted.org/reviewboard/</a>
</li><li>Click on <tt>sssd</tt> under <tt>Incoming Reviews</tt> in the dashboard. This will show you the list of pending reviews for the SSSD.
</li><li>Click on a pending review to see its details.
</li><li>Click on <tt>View Diff</tt> tab to see a side-by-side diff.
</li><li>You can click on any line number in the diff to make a comment, or drag-select to make a comment on multiple lines at once.
</li><li>Comments are not published when you click 'OK', they are queued and published all at once when you click on <tt>Publish</tt>
</li><li>To make a comment on the patch as a whole, or to approve the chance, click on the <tt>Review</tt> tab. Making comments here behaves like making comments on lines.
</li><li>Clicking "Ship It" marks your approval for this patch. (Similar to sending "Ack" to the email list)
</li></ol></body></html>