<html><head><link rel="stylesheet" href="/sssd-test2/trac.css" type="text/css" /><link rel="stylesheet" href="/sssd-test2/wiki.css" type="text/css" /></head><body><h2 id="SSSDgithubworkflow">SSSD github workflow</h2>
<p>
This page describes how to submit, review and push pull requests from github.
</p>
<h3 id="Aquickoverwiew">A quick overwiew</h3>
<p>
Github pull requests are the preferred way of handling code submissions to SSSD. If, for some reason you prefer to not use github, you can also e-mail your patch as an attachment to the 
<a class="ext-link" href="https://lists.fedorahosted.org/archives/list/sssd-devel%40lists.fedorahosted.org/"><span class="icon">​</span>sssd-devel</a> mailing list.
</p>
<p>
However, we still keep our code in the fedorahosted repository and we never
merge pull requests, but push them directly to the fedorahosted repo in
order to keep our history linear. The fedorahosted repo is automatically
mirrored to github after every push using a fedorahosted.org plugin.
</p>
<p>
All pull request activity also generates an e-mail notification to the
sssd-devel mailing list so that we keep the development history outside
github.
</p>
<h3 id="Tip:thehubcommand-linetool">Tip: the <tt>hub</tt> command-line tool</h3>
<p>
The <a class="ext-link" href="https://github.com/github/hub"><span class="icon">​</span>hub</a> tool provides a nice way of
interacting with github from the command line. You can even alias <tt>hub</tt>
as <tt>git</tt> and use the same commands locally and against github.
</p>
<h3 id="Submittingapull-request">Submitting a pull-request</h3>
<p>
To submit a pull request, create a fork of the <a class="ext-link" href="https://github.com/SSSD/sssd"><span class="icon">​</span>sssd repository</a> on github. Once you have that, add your repository as a remote locally:
</p>
<pre class="wiki">    git remote add myfork git@github.com:$github_username/sssd.git
</pre><p>
It's a good idea to add the SSSD github repo as a remote, especially if you plan on using <tt>hub</tt>:
</p>
<pre class="wiki">    git remote add github https://github.com/SSSD/sssd.git
</pre><p>
Using <tt>https://</tt> will ensure you don't push to sssd's github repo by mistake.
</p>
<p>
Once you're done working on your patches, push them to a feature branch on github:
</p>
<pre class="wiki">    git push myfork mybranch
</pre><p>
You can then open a pull request either from the <a class="ext-link" href="https://help.github.com/articles/creating-a-pull-request/"><span class="icon">​</span>web ui</a> or using the hub tool:
</p>
<pre class="wiki">    hub pull-request
</pre><h3 id="Reviewingapullrequests">Reviewing a pull requests</h3>
<p>
The list of open pull requests can be found at
<a class="ext-link" href="https://github.com/SSSD/sssd/pulls"><span class="icon">​</span>https://github.com/SSSD/sssd/pulls</a>. If you want to formally review a
pull request, please assign the pull request to yourself. This indicates
that you'll be working with the submitter on pushing their pull requests
upstream. You don't need to assign the pull request if you just want to
add a one-time comment. The pull-request assignee(s) will be added as
<tt>Reviewed-By</tt> tags when pushing to the <tt>fedorahosted.org</tt> repository.
</p>
<p>
To comment on the code, you can use either add a comment to the github text
field, or click on the individual commit links and add comments inline to
the diff.
</p>
<p>
If there is an issue in the code that you feel warrants a patch respin,
add the <tt>nack</tt> label to the pull request.
</p>
<p>
Once you agree with the pull request, add the <tt>ack</tt> label to the pull
request. One of the gatekeepers will then push the pull request to the
sssd repository manually.
</p>
<p>
If a pull-request is submitted by someone from outside the core team,
the CI tests won't run to make sure some potentially malicious code is
not ran on the CI nodes. To allow the code to be tested, one of the core developers must add:
</p>
<pre class="wiki">    ok to test
</pre><p>
as a comment to the pull request. An example of one such pull request can
be found <a class="ext-link" href="https://github.com/SSSD/sssd/pull/35"><span class="icon">​</span>here</a>.
</p>
<p>
Any github user can comment on an open github issue. However, only
collaboratos can self-assign the pull requests and add labels. If you would
like to be added as a collaborator, please send a mail to
<a class="ext-link" href="https://lists.fedorahosted.org/archives/list/sssd-devel%40lists.fedorahosted.org/"><span class="icon">​</span>sssd-devel</a>
and ask to be added.
</p>
<p>
<strong>Pro-tips:</strong>
</p>
<ul><li>Pressing <tt>l</tt> on the gihub request allows to set labels without reaching for the mouse. You can also set assignee by pressing <tt>a</tt>.
</li><li>You can add pull requests as refs and add check them out as branches locally. To do that, add another <tt>fetch</tt> directive to your github remote definition using <tt>git config</tt>.
<pre class="wiki">    GITHUB_REMOTE="github"
    git config --add remote.$GITHUB_REMOTE.fetch "+refs/pull/*/head:refs/remotes/$GITHUB_REMOTE/pull/*"
</pre></li></ul><p>
Then you can fetch and checkout the pull requests with git:
</p>
<pre class="wiki">    git fetch github
    git checkout -b pr7review --track github/pull/7
</pre><h3 id="Pushingapullrequest">Pushing a pull request</h3>
<p>
Only pull requests with an <tt>ack</tt> label can be pushed.
</p>
<p>
To push a patch, first apply it, for example:
</p>
<pre class="wiki">    hub am https://github.com/SSSD/sssd/pull/5
</pre><p>
Don't forget to add the <tt>Reviewed-By</tt> tags, based on the pull
request assignee. It's recommended to use the pre-push hook from
<tt>contrib/git/pre-push</tt> that rejects any pushes without a <tt>Reviewed-By</tt> tag.
</p>
<p>
Then check again what patches would be pushed:
</p>
<pre class="wiki">    git push -n origin master
</pre><p>
And if the hashes look OK, finally push the patches:
</p>
<pre class="wiki">    git push origin master
</pre><p>
Finally, add the commit hashes to the pull request page, add the label
<tt>pushed</tt> and close the pull request.
</p>
</body></html>